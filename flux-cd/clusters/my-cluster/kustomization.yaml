apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Namespaces MUST be created first
  - ../../namespaces

  # RBAC resources
  - ../../rbac/staging-rbac.yaml
  - ../../rbac/production-rbac.yaml

  # Infrastructure - includes repositories, helm releases, and cluster resources
  - ../../infrastructure

  # Super-Todo Chart
  - super-todo-helmchart.yaml

  # Applications - Staging (depends on staging namespace and infrastructure)
  - ../../apps/super-todo/staging/helmrelease.yaml

  # Applications - Production (depends on production namespace and infrastructure)
  - ../../apps/super-todo/production/helmrelease.yaml
